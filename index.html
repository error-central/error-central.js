<html>

<head>
	<script src="./error-central.js" charset="utf-8"></script>

	<script>
		function fd(x) {
			x(5);
		}
		function fc(x) {
			fd(x);
		}
		function fb(x) {
			fc(x);
		}
		function fa(x) {
			fb(x);
		}

		function evalForError() {
			try {
				eval(document.getElementById('ta').value);
			} catch (e) {
				throw e; // intentionally re-throw (caught by window.onerror)
			}
			// 	// console.log(e)
			// 	var error = new ErrorEvent('Eval event', e);
			// 	// NOT WORKING. :(
			// 	window.dispatchEvent(error);
			// };
			// return false;
		}

		function jsonTest() {
			try {
				return JSON.parse({ "balance": 0, "count": 0, "time": 1323973673061, "firstname": "howard", "userId": 5383, "localid": 1, "freeExpiration": 0, "status": false });
			} catch (e) {
				throw e; // intentionally re-throw (caught by window.onerror)
			}
		}



	</script>
</head>

<body>

	<h1>Re-thinking Error messages
		<!-- : Demo of Error Central for javascript -->
	</h1>

	<p>The Github repo for this demo is <a href="https://github.com/error-central/error-central.js">here</a>.</p>

	<!-- <p>
		It's ironic that developers are creating smooth, smart, integrated expereinces for other professions, but developer
		tools themselves remain warmed-over 70's teletype.
	</p> -->

	<p>Buttons on this page produce errors. Open the browser console Command-Option-J to view console.</p>

	<button onclick="x=undefinedFunction(4)"><code>undefinedFunction(4)</code></button>

	<button onclick="x=undefinedFunctionNoIssue(4)"><code>undefinedFunctionNoIssue()</code></button>

	<!--
		Github issue: https://github.com/facebook/react/issues/16501
		SO question: https://stackoverflow.com/questions/47292727/react-uncaught-rangeerror-maximum-call-stack-size-exceeded
	-->
	<button onclick="Array.apply(null, new Array(1000000)).map(Math.random);"><code>RangeError</code></button>

	<button onclick='jsonTest()'>
		<code>JSON.parse()</code>
	</button>


	<button onclick="fa(4)"><code>Stack Function</code></button>

	<form onsubmit="return false;">
		<textarea id="ta"
			style="font-family: monospace; width:500px; height:200px; text-align: left; background-color: black; color:white;">randomFunction();</textarea>
		<!-- <button onclick="eval(document.getElementById('ta').value); return false;">Execute</button> -->
		<!-- <button onclick="window['eval'].call(window, document.getElementById('ta').value); return false;">Execute</button> -->

		<button onclick="return evalForError()">Execute</button>

	</form>

	<script>

			// window.onerror = function (message, source, lineno, colno, error) {
			// console.info(">>>" + message, source, lineno)
			// }

			// console.log("Hi");

			// console.error("User generated error.");

			// fart()
			// setTimeout("fart", 1000);


			// let req = new XMLHttpRequest();
			// let dependencies;
			// req.open('GET', 'https://google.com/someapi');
			// req.onload = () => {
			// console.log("We wont' get here.")
			// };
			// req.send();


	</script>


	<pre>
		- Automate actions good devs do already
			- Including long-shot searches that a coder would only do
		- Remove code-specific parts of error that would be irrelevant
			- "myFunnyVariableName"
		- Search open issues for the project
			- If some other dev has reported the problem, know it immediately.
		-
		- Extend
	</pre>

	<h2>Link to error docs</h2>

	<h3>Link to <em>localized</em> error docs</h3>

	<h2>Search Issues</h2>

	<h2>Show analytics</h2>

	<h2>Search Stack Overflow</h2>

	<h2>Search with dependencies</h2>

	<h2>Search with Stack Trace</h2>

	<h2>Machine Learning</h2>

</body>

</html>
